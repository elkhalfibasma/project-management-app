{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/user/project-management-app/frontend/project-management-ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport Chart from 'chart.js/auto';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../services/api.service\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"@angular/router\";\nconst _c0 = [\"kpiChart\"];\nconst _c1 = a0 => [\"/projects\", a0];\nfunction DashboardPage_tr_17_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\", 8)(1, \"td\")(2, \"a\", 9);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(4, \"td\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\");\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const p_r1 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c1, p_r1.id));\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate(p_r1.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(p_r1.status);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", p_r1.progress, \"%\");\n  }\n}\nexport let DashboardPage = /*#__PURE__*/(() => {\n  class DashboardPage {\n    constructor(api) {\n      this.api = api;\n      this.projects = [];\n      this.tasks = [];\n      this.recommendations = [];\n    }\n    ngAfterViewInit() {\n      var _this = this;\n      return _asyncToGenerator(function* () {\n        _this.projects = yield _this.api.get('/projects');\n        _this.tasks = yield _this.api.get('/tasks');\n        new Chart(_this.kpiChart.nativeElement.getContext('2d'), {\n          type: 'doughnut',\n          data: {\n            labels: ['Done', 'In Progress', 'Todo'],\n            datasets: [{\n              data: [_this.tasks.filter(t => t.status === 'DONE').length, _this.tasks.filter(t => t.status === 'IN_PROGRESS').length, _this.tasks.filter(t => !['DONE', 'IN_PROGRESS'].includes(t.status)).length],\n              backgroundColor: ['#16a34a', '#06b6d4', '#64748b']\n            }]\n          }\n        });\n      })();\n    }\n    static {\n      this.ɵfac = function DashboardPage_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || DashboardPage)(i0.ɵɵdirectiveInject(i1.ApiService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: DashboardPage,\n        selectors: [[\"app-dashboard\"]],\n        viewQuery: function DashboardPage_Query(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵviewQuery(_c0, 5);\n          }\n          if (rf & 2) {\n            let _t;\n            i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.kpiChart = _t.first);\n          }\n        },\n        decls: 18,\n        vars: 1,\n        consts: [[\"kpiChart\", \"\"], [1, \"grid\", \"grid-cols-1\", \"md:grid-cols-3\", \"gap-4\"], [1, \"bg-white/10\", \"rounded\", \"p-4\"], [1, \"text-lg\", \"mb-2\"], [1, \"bg-white/10\", \"rounded\", \"p-4\", \"col-span-2\"], [1, \"text-lg\"], [1, \"w-full\", \"text-left\", \"mt-2\"], [\"class\", \"border-t border-white/10\", 4, \"ngFor\", \"ngForOf\"], [1, \"border-t\", \"border-white/10\"], [1, \"text-cyan-300\", \"hover:underline\", 3, \"routerLink\"]],\n        template: function DashboardPage_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 1)(1, \"div\", 2)(2, \"h3\", 3);\n            i0.ɵɵtext(3, \"KPI T\\u00E2ches\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(4, \"canvas\", null, 0);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(6, \"div\", 4)(7, \"h3\", 5);\n            i0.ɵɵtext(8, \"Projets r\\u00E9cents\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(9, \"table\", 6)(10, \"tr\")(11, \"th\");\n            i0.ɵɵtext(12, \"Titre\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(13, \"th\");\n            i0.ɵɵtext(14, \"Statut\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(15, \"th\");\n            i0.ɵɵtext(16, \"Progress\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(17, DashboardPage_tr_17_Template, 8, 6, \"tr\", 7);\n            i0.ɵɵelementEnd()()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(17);\n            i0.ɵɵproperty(\"ngForOf\", ctx.projects);\n          }\n        },\n        dependencies: [i2.NgForOf, i3.RouterLink],\n        encapsulation: 2\n      });\n    }\n  }\n  return DashboardPage;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}